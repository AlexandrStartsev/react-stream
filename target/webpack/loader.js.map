{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/es-polyfill.js","webpack:///./src/ts/api/ajaxCache.ts","webpack:///./src/ts/api/dfe-stream.ts","webpack:///./src/ts/api/proxy.ts","webpack:///./src/ts/api/utils.ts","webpack:///./src/ts/forms lazy ^\\.\\/.*$ namespace object","webpack:///./src/ts/loader.tsx"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA,0BAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kDAA0C;AAC1C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA,yCAAiC;;AAEjC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,cAAM;AACN;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAwB,kCAAkC;AAC1D,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,kDAA0C,oBAAoB,WAAW;;AAEzE;AACA;AACA;AACA;AACA,wBAAgB,uBAAuB;AACvC;;;AAGA;AACA;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ACA;AACA;AACA,wCAAwC,qDAAqD,kCAAkC;AAC/H;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wCAAwC,mCAAmC,kCAAkC;AAC7G;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wCAAwC,qCAAqC,kCAAkC;AAC/G;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,yBAAyB;AACzB;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA,qBAAqB,2BAA2B;AAChD;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,oB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,aAAa,GAAG;AAChB;AACA,KAAK;AACL,qCAAqC,2CAA2C,EAAE;AAClF;AACA;AACA,aAAa,GAAG;AAChB;AACA,KAAK;AACL,qCAAqC,cAAc,uBAAuB,GAAG,4BAA4B,cAAc;AACvH,uCAAuC,cAAc,uBAAuB,GAAG,8BAA8B,cAAc;AAC3H;;AAEA,mCAAmC,eAAe,yCAAyC,cAAc,SAAS;AAClH;AACA;AACA;AACA;AACA,wCAAwC,mCAAmC,kCAAkC;AAC7G;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,SAAS;AACT;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,oB;AACA,KAAK;AACL,sCAAsC,kBAAkB,eAAe,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,8BAA8B,GAAG;AACjC;AACA,KAAK;AACL,qC;AACA,8BAA8B,GAAG;AACjC;AACA;AACA,KAAK;AACL;;AAEA,CAAC,4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvLkE;AAWnE;IAII,mBAAY,OAA+C;QACvD,I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","file":"loader.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"loader\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\thead.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/ts/loader.tsx\",\"vendors~loader\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// Promise\r\ntypeof Promise === \"undefined\" && !function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){\"use strict\";function t(t){var e=typeof t;return null!==t&&(\"object\"===e||\"function\"===e)}function e(t){return\"function\"==typeof t}function n(t){B=t}function r(t){G=t}function o(){return function(){return process.nextTick(a)}}function i(){return\"undefined\"!=typeof z?function(){z(a)}:c()}function s(){var t=0,e=new J(a),n=document.createTextNode(\"\");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<W;t+=2){var e=V[t],n=V[t+1];e(n),V[t]=void 0,V[t+1]=void 0}W=0}function f(){try{var t=Function(\"return this\")().require(\"vertx\");return z=t.runOnLoop||t.runOnContext,i()}catch(e){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[Z]&&O(r);var o=n._state;if(o){var i=arguments[o-1];G(function(){return P(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&\"object\"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError(\"You cannot resolve a promise with itself\")}function d(){return new TypeError(\"A promises callback cannot return that same promise.\")}function _(t){try{return t.then}catch(e){return nt.error=e,nt}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){G(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},\"Settle: \"+(t._label||\" unknown promise\"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===tt?S(t,e._result):e._state===et?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===nt?(j(t,nt.error),nt.error=null):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===$&&(t._result=e,t._state=tt,0!==t._subscribers.length&&G(T,t))}function j(t,e){t._state===$&&(t._state=et,t._result=e,G(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+tt]=n,o[i+et]=r,0===i&&t._state&&G(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?P(n,r,o,i):o(i);t._subscribers.length=0}}function M(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function P(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===nt?(a=!0,u=s.error,s.error=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==$||(i&&c?g(n,s):a?j(n,u):t===tt?S(n,s):t===et&&j(n,s))}function x(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function C(){return rt++}function O(t){t[Z]=rt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(){return new Error(\"Array Methods must be provided an Array\")}function F(t){return new ot(this,t).promise}function Y(t){var e=this;return new e(U(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError(\"You must pass an array to race.\"))})}function q(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function K(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function L(){var t=void 0;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if(\"[object Promise]\"===r&&!n.cast)return}t.Promise=it}var N=void 0;N=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};var U=N,W=0,z=void 0,B=void 0,G=function(t,e){V[W]=t,V[W+1]=e,W+=2,2===W&&(B?B(a):X())},H=\"undefined\"!=typeof window?window:void 0,I=H||{},J=I.MutationObserver||I.WebKitMutationObserver,Q=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),R=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,V=new Array(1e3),X=void 0;X=Q?o():J?s():R?u():void 0===H&&\"function\"==typeof require?f():c();var Z=Math.random().toString(36).substring(2),$=void 0,tt=1,et=2,nt={error:null},rt=0,ot=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[Z]||O(this.promise),U(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):j(this.promise,k())}return t.prototype._enumerate=function(t){for(var e=0;this._state===$&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==$)this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof o)this._remaining--,this._result[e]=t;else if(n===it){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===$&&(this._remaining--,t===et?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(tt,e,t)},function(t){return n._settledAt(et,e,t)})},t}(),it=function(){function t(e){this[Z]=C(),this._result=this._state=void 0,this._subscribers=[],p!==e&&(\"function\"!=typeof e&&D(),this instanceof t?x(this,e):K())}return t.prototype[\"catch\"]=function(t){return this.then(null,t)},t.prototype[\"finally\"]=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return it.prototype.then=l,it.all=F,it.race=Y,it.resolve=h,it.reject=q,it._setScheduler=n,it._setAsap=r,it._asap=G,it.polyfill=L,it.Promise=it,it.polyfill(),it});\r\n\r\n// WeakMap\r\n(function(e){\"use strict\";if(e.WeakMap){return}var t=Object.prototype.hasOwnProperty;var r=function(e,t,r){if(Object.defineProperty){Object.defineProperty(e,t,{configurable:true,writable:true,value:r})}else{e[t]=r}};e.WeakMap=function(){function WeakMap(){if(this===void 0){throw new TypeError(\"Constructor WeakMap requires 'new'\")}r(this,\"_id\",genId(\"_WeakMap\"));if(arguments.length>0){throw new TypeError(\"WeakMap iterable is not supported\")}}r(WeakMap.prototype,\"delete\",function(e){checkInstance(this,\"delete\");if(!isObject(e)){return false}var t=e[this._id];if(t&&t[0]===e){delete e[this._id];return true}return false});r(WeakMap.prototype,\"get\",function(e){checkInstance(this,\"get\");if(!isObject(e)){return void 0}var t=e[this._id];if(t&&t[0]===e){return t[1]}return void 0});r(WeakMap.prototype,\"has\",function(e){checkInstance(this,\"has\");if(!isObject(e)){return false}var t=e[this._id];if(t&&t[0]===e){return true}return false});r(WeakMap.prototype,\"set\",function(e,t){checkInstance(this,\"set\");if(!isObject(e)){throw new TypeError(\"Invalid value used as weak map key\")}var n=e[this._id];if(n&&n[0]===e){n[1]=t;return this}r(e,this._id,[e,t]);return this});function checkInstance(e,r){if(!isObject(e)||!t.call(e,\"_id\")){throw new TypeError(r+\" method called on incompatible receiver \"+typeof e)}}function genId(e){return e+\"_\"+rand()+\".\"+rand()}function rand(){return Math.random().toString().substring(2)}r(WeakMap,\"_polyfill\",true);return WeakMap}();function isObject(e){return Object(e)===e}})(typeof self!==\"undefined\"?self:typeof window!==\"undefined\"?window:typeof global!==\"undefined\"?global:this);\r\n\r\n(function(g){\r\nvar Symbol = g.Symbol||(g.Symbol = {});\r\nSymbol.iterator || (Symbol.iterator='Symbol(Symbol.iterator)')\r\nSymbol.toStringTag || (Symbol.toStringTag='Symbol(Symbol.toStringTag)')\r\n\r\nArray.isArray || (Array.isArray = function(o) { return o instanceof Array })\r\nArray.prototype.forEach || (Array.prototype.forEach = function(f, a) { for(var i = 0; i < this.length; i++) f.call(a, this[i], i, this) })\r\nArray.prototype.indexOf || (Array.prototype.indexOf = function(e) { var i=this.length-1; for(;i>=0 && this[i] != e;i--); return i; })\r\nArray.prototype.filter || (Array.prototype.filter = function(f, a) { var r=[],i; for(i=0; i < this.length; i++) f.call(a, this[i], i, this) && r.push(this[i]); return r } )\r\nArray.prototype.map || (Array.prototype.map = function(f, a) { var r=[],i; for(i=0; i < this.length; i++) r.push(f.call(a, this[i], i, this)); return r } )\r\nArray.from || (Array.from = function(s) { \r\n    var r = [], o;\r\n    Symbol && Symbol.iterator && (typeof s[Symbol.iterator] === 'function') && (s=s[Symbol.iterator]());\r\n    if(typeof s.next === 'function') \r\n        while(!(o=s.next()).done) \r\n            r.push(o.value); \r\n    else \r\n        s.forEach(function(e) { r.push(e); } ); \r\n    return r; \r\n})\r\nif (typeof Object.assign != 'function') {\r\n    Object.assign = function(target) {\r\n        'use strict';\r\n        if (target == null) {\r\n            throw new TypeError('Cannot convert undefined or null to object');\r\n        }\r\n        target = Object(target);\r\n        for (var index = 1; index < arguments.length; index++) {\r\n            var source = arguments[index];\r\n            if (source != null) {\r\n                for (var key in source) {\r\n                    if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n                        target[key] = source[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    };\r\n}\r\n\r\n    g.Map || (g.Map = function(i) { this.size = 0; i && Array.from(i).forEach(function(a) { a=Array.from(a); this.set(a[0], a[1]) }, this) },\r\n    Map.prototype.clear = function() { delete this.head; this.size = 0; },\r\n    Map.prototype[Symbol.iterator] = function() {\r\n        return {\r\n            pos: this.head,\r\n            next: function () {\r\n                return this.pos ? (r = { value: [this.pos.key, this.pos.value], done: false }, (this.pos=this.pos.next), r) : { done : true };\r\n            }\r\n        }\r\n    },\r\n    Map.prototype.keys = function() {\r\n        return {\r\n            pos: this.head,\r\n            next: function () {\r\n                return this.pos ? (r = { value: this.pos.key, done: false }, (this.pos=this.pos.next), r) : { done : true };\r\n            }\r\n        }\r\n    },\r\n    Map.prototype.values = function() {\r\n        return {\r\n            pos: this.head,\r\n            next: function () {\r\n                return this.pos ? (r = { value: this.pos.value, done: false }, (this.pos=this.pos.next), r) : { done : true };\r\n            }\r\n        }\r\n    },        \r\n    Map.prototype.entries = Map.prototype[Symbol.iterator],\r\n    Map.prototype.set = function(k,v) {\r\n        if(!this.head) {\r\n            this.head = {key: k, value: v};\r\n            this.size++;\r\n        } else {\r\n            if(this.head.key == k) {\r\n                this.head.value = v;\r\n            } else {\r\n                var h = this.head;\r\n                for(; h.next && h.next.key != k; h=h.next) ;\r\n                if(!h.next) {\r\n                    h.next = {key: k};\r\n                    this.size++;\r\n                }\r\n                h.next.value = v;\r\n            }\r\n        }\r\n        return this; \r\n    },\r\n    Map.prototype['delete'] = function(k) {\r\n        if(this.head) {\r\n            if(this.head.key == k) {\r\n                this.head = this.head.next;\r\n                this.size--;\r\n                return true;\r\n            } else {\r\n                var h = this.head;\r\n                for(; h.next && h.next.key != k ; h=h.next);\r\n                if(h.next) {\r\n                    h.next = h.next.next;\r\n                    this.size --;\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    Map.prototype.get = function(k) {\r\n        var h = this.head;\r\n        for(; h; h=h.next) \r\n            if(h && h.key == k) return h.value;\r\n    },\r\n    Map.prototype.has = function(k) { return typeof this.get(k) !== 'undefined'; },\r\n    Map.prototype.forEach = function(f, a) {\r\n        var h = this.head;\r\n        for(; h; h=h.next) \r\n            f.call(a, h.value, h.key, this);\r\n    },\r\n    Map.prototype.keys = function() { var ret = []; for(var h = this.head; h; h=h.next)  ret.push(h.key);  return ret;},\r\n    Map.prototype.values = function() { var ret = []; for(var h = this.head; h; h=h.next)  ret.push(h.value);  return ret;},\r\n    Map)\r\n    \r\n    g.Set || (g.Set = function(i) { this.size = 0; i && Array.from(i).forEach(function(v) { this.add(v) }, this) },\r\n    Set.prototype[Symbol.iterator] = function() {\r\n        return {\r\n            pos: this.head,\r\n            next: function () {\r\n                return this.pos ? (r = { value: this.pos.key, done: false }, (this.pos=this.pos.next), r) : { done : true };\r\n            }\r\n        }\r\n    },\r\n    Set.prototype.keys = Set.prototype[Symbol.iterator],\r\n    Set.prototype.entries = Set.prototype[Symbol.iterator],\r\n    Set.prototype.add = function(k) {\r\n        if(!this.head) {\r\n            this.head = {key: k};\r\n            this.size++;\r\n        } else {\r\n            if(this.head.key != k) {\r\n                var h = this.head;\r\n                for(; h.next && h.next.key != k; h=h.next) ;\r\n                if(!h.next) {\r\n                    h.next = {key: k};\r\n                    this.size++;\r\n                }\r\n            }\r\n        }\r\n        return this; \r\n    },\r\n    Set.prototype.clear = function() { delete this.head; this.size = 0; },\r\n    Set.prototype['delete'] = function(k) {\r\n        if(this.head) {\r\n            if(this.head.key == k) {\r\n                this.head = this.head.next;\r\n                this.size--;\r\n                return true;\r\n            } else {\r\n                var h = this.head;\r\n                for(; h.next && h.next.key != k ; h=h.next);\r\n                if(h.next) {\r\n                    h.next = h.next.next;\r\n                    this.size --;\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    Set.prototype.forEach = function (f, a) {\r\n        for(var h = this.head; h; h=h.next) \r\n            f.call(a, h.key, this);\r\n    },\r\n    Set.prototype.has = function(k) { \r\n        for(var h = this.head; h; h=h.next) \r\n            if(h && h.key == k) return true;\r\n        return false;\r\n    },\r\n    Set)\r\n\r\n})(\"undefined\"!==typeof window?window:global)","import {AsyncContextBase, ChoiceInfo, required} from \"./dfe-stream\"\r\n\r\ninterface CacheInterface<T> {\r\n    get(key: string, compute: (key?: string) => T): T\r\n    set(key: string, value: T): void\r\n    has(key: string): boolean\r\n    clear(): void\r\n    getAccessedSince(cutOff: number): {[index: string]: T}\r\n    expireAfter(key: string, millis: number): void\r\n}\r\n\r\nclass CacheImpl<T> implements CacheInterface<T> {\r\n    storage: Map<string, {value: T, timeStamp: number}> // {[index: string]: {value: T, timeStamp: number}}\r\n    cleanupTimer: number\r\n    options: {lifespan?: number, maxSize?: number}\r\n    constructor(options?: {lifespan?: number, maxSize?: number}) {\r\n        this.storage = new Map();\r\n        this.cleanupTimer = 0;\r\n        this.options = Object.assign({lifespan: 0, maxSize: 0}, {...options||{}});\r\n    }\r\n    get(key: string, compute: (key?: string) => T) {\r\n        if(this.storage.has(key)) {\r\n            let data = this.storage.get(key), now = +new Date();\r\n            if(this.options.lifespan <= 0 || data.timeStamp + this.options.lifespan > now) {\r\n                data.timeStamp = now;\r\n                return data.value;\r\n            }\r\n        }\r\n        let value = compute(key);\r\n        this.set(key, value);\r\n        return value;\r\n    }\r\n    set(key: string, value: T) {\r\n        let data = {timeStamp: +new Date(), value: value}\r\n        this.storage.set(key, data);\r\n        this.cleanupTimer || this.options.lifespan > 0 && (this.cleanupTimer = setInterval(() => this.cleanup(), 1000) as any);\r\n        let size = this.storage.size || (this.storage as any).length;\r\n        if( this.options.maxSize > 0 && size > this.options.maxSize ) {\r\n            let first: string, set = false;\r\n            this.storage.forEach((_, key) => set || (set = true, first = key));\r\n            this.storage.delete(first);\r\n        }\r\n    }\r\n    expireAfter(key: string, millis: number) {\r\n        if(this.options.lifespan > 0 && this.storage.has(key)) {\r\n            let data = this.storage.get(key), now = +new Date();\r\n            data.timeStamp = now - this.options.lifespan + millis;\r\n        }\r\n    }\r\n    has(key: string) {\r\n        let data = this.storage.get(key);\r\n        return !!data && ( this.options.lifespan <= 0 || data.timeStamp + this.options.lifespan > +new Date() );\r\n    }\r\n    clear() {\r\n        this.storage.clear();\r\n        this.cleanupTimer && clearInterval(this.cleanupTimer);\r\n        this.cleanupTimer = 0;\r\n    }\r\n    private cleanup() {\r\n        let cutOff = +new Date() - this.options.lifespan;\r\n        this.storage.forEach((value, key) => value.timeStamp <= cutOff && this.storage.delete(key));\r\n        if(this.storage.size === 0) {\r\n            clearInterval(this.cleanupTimer);\r\n            this.cleanupTimer = 0;\r\n        }\r\n    }\r\n    getAccessedSince(cutOff: number) {\r\n        let ret: {[index: string]: T} = {};\r\n        this.storage.forEach((value, key) => value.timeStamp >= cutOff && (ret[key] = value.value));\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport declare var Java: {type: (javaClass: string) => any}\r\nconst JavaCacheBuilder = typeof Java !== 'undefined' ? Java.type('com.google.common.cache.CacheBuilder') : null;\r\nconst JavaTimeUnit = typeof Java !== 'undefined' ? Java.type('java.util.concurrent.TimeUnit') : null;\r\n\r\nclass GuavaCache<T> implements CacheInterface<T> {\r\n    impl: any\r\n    constructor(options?: {lifespan?: number, maxSize?: number}) {\r\n        let builder = JavaCacheBuilder.newBuilder();\r\n        options && (\r\n            options.lifespan && builder.expireAfterAccess(options.lifespan, JavaTimeUnit.MILLISECONDS), \r\n            options.maxSize && builder.maximumSize(options.maxSize)\r\n        );\r\n        this.impl = builder.build();\r\n    }\r\n    get(key: string, compute: (key?: string) => T) { \r\n        let val = this.impl.get(key, (key: string) => ({value: compute(key)}));\r\n        val.timeStamp = +new Date();\r\n        return val.value;\r\n    }\r\n    set(key: string, value: T) {\r\n        this.impl.put(key, {value: value, timeStamp: +new Date()});\r\n    }\r\n    has(key: string) {\r\n        return this.impl.getIfPresent(key) !== null;\r\n    }\r\n    clear() {\r\n        return this.impl.invalidateAll();\r\n    }\r\n    expireAfter(key: string, millis: number) {\r\n        setTimeout(() => this.impl.invalidate(key), millis);\r\n    }\r\n    getAccessedSince(cutOff: number) {\r\n        let ret: {[index: string]: T} = {};\r\n        this.impl.asMap().forEach((key: string, value: {value: T, timeStamp: number}) => value.timeStamp >= cutOff && (ret[key] = value.value));\r\n        return ret;\r\n    }\r\n}\r\n\r\nconst newCache: <T>(options?: {lifespan?: number, maxSize?: number}) => CacheInterface<T> = JavaCacheBuilder ? options => new GuavaCache(options) : options => new CacheImpl(options)\r\n\r\nexport class Cache<T> implements CacheInterface<T> {\r\n    impl: CacheInterface<T>\r\n    constructor(options?: {lifespan?: number, maxSize?: number}) {\r\n        this.impl = newCache(options);\r\n    }\r\n    get(key: string, compute: (key?: string) => T) { \r\n        return this.impl.get(key, compute);\r\n    }\r\n    set(key: string, value: T) {\r\n        this.impl.set(key, value);\r\n    }\r\n    has(key: string) {\r\n        return this.impl.has(key);\r\n    }\r\n    clear() {\r\n        return this.impl.clear();\r\n    }\r\n    getAccessedSince(cutOff: number) {\r\n        return this.impl.getAccessedSince(cutOff);\r\n    }\r\n    expireAfter(key: string, millis: number) {\r\n        this.impl.expireAfter(key, millis);\r\n    }\r\n}\r\n\r\n\r\nexport class ImmediatePromise {\r\n    done?: \"rejected\" | \"success\"\r\n    result?: any\r\n    promise?: Promise<any>\r\n}\r\n\r\nexport interface AjaxCacheQuery { \r\n    dataType?: string\r\n    type?: string\r\n    data?: any\r\n    headers?: {[prop: string] : any}\r\n    url?: string\r\n}\r\n\r\ndeclare const ENV: {server: boolean};\r\n\r\nexport let ajaxCache = {\r\n    storage: new Cache<ImmediatePromise>({lifespan: 60000, maxSize: 1000}),\r\n    get: function( opt: AjaxCacheQuery | string | {[prop: string] : any} ): ImmediatePromise {\r\n        let base = ENV.server ? \"https://arrowheadexchange.com/AJAXServlet.srv?\" : \"/AJAXServlet.srv?\";\r\n        if(typeof opt !== 'string' && !(<AjaxCacheQuery>opt).url) { // method: ... action: ...\r\n            let u = base;\r\n            for(var o in opt) {\r\n                let a = (<{ [prop: string] : any }>opt)[o];\r\n                (Array.isArray(a)?a:[a]).forEach(\r\n                    (v: any) => u += encodeURIComponent(o) + '=' + encodeURIComponent(typeof v == 'object' ? JSON.stringify(v) : v) + '&'\r\n                )\r\n            }\r\n            opt = u.replace(/\\&$/,'');\r\n        }\r\n        let url = typeof opt === 'string' ? opt : (<AjaxCacheQuery>opt).url, key = encodeURIComponent(url.replace(base, ''))\r\n        \r\n        let storage = this.storage;\r\n        return storage.get(key,\r\n            () => {\r\n                let ret: ImmediatePromise = {}\r\n                ret.promise = new Promise((resolve, reject) => {\r\n                    let xhr = new XMLHttpRequest();\r\n                    try {\r\n                        let dataType = (<AjaxCacheQuery>opt).dataType || 'json', so = typeof (<AjaxCacheQuery>opt).data === 'object';\r\n                        let hrds: {[prop: string] : any} = {'Content-Type' : so ? 'application/json' : 'application/x-www-form-urlencoded', ...(<AjaxCacheQuery>opt).headers};\r\n                        xhr.open((<AjaxCacheQuery>opt).type || 'GET', so ? url : url + '&cacheKey=' + key);\r\n                        for(let i in hrds) xhr.setRequestHeader(i, hrds[i]);\r\n                        dataType == 'json' && xhr.setRequestHeader('Accept', 'application/json');\r\n                        xhr.onreadystatechange = function() {\r\n                            if(this.readyState === 4) {\r\n                                ret.done = \"success\";\r\n                                if(this.status == 200)\r\n                                    try {\r\n                                        let r = this.response || this.responseText;\r\n                                        resolve(ret.result = typeof r == 'string' && dataType == 'json' ? JSON.parse(r) : r)\r\n                                    } catch(e) {\r\n                                        ret.done = \"rejected\";\r\n                                        reject(ret.result = e);\r\n                                        storage.expireAfter(key, 1000);\r\n                                    }\r\n                                else {\r\n                                    ret.done = \"rejected\";\r\n                                    reject(ret.result = xhr);\r\n                                    storage.expireAfter(key, 1000);\r\n                                }\r\n                            }\r\n                        }\r\n                        xhr.send(so ? {cacheKey: key, ...(<AjaxCacheQuery>opt).data} : (<AjaxCacheQuery>opt).data);\r\n                    } catch(e) {\r\n                        ret.done = \"rejected\";\r\n                        reject(ret.result = e);\r\n                        storage.expireAfter(key, 1000);\r\n                    }\r\n                })\r\n                return ret;\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport enum AjaxStatus {\r\n    error='error',\r\n    loading='loading',\r\n    done='done'\r\n}\r\n\r\nexport interface AjaxChoiceInfo<T> extends ChoiceInfo<T> {\r\n    status: AjaxStatus,\r\n    errorMessage: string\r\n}\r\n\r\nexport interface AjaxFeedParams<T> {\r\n    query?: string | AjaxCacheQuery | {[index: string]: any}\r\n    headers?: {[prop: string] : any}\r\n    mapper?: (record: any) => {value: T, description: string}\r\n}\r\n\r\nexport function ajaxRequired<T, M>(value: AjaxChoiceInfo<T>, model: M, context: AsyncContextBase) {\r\n    let {status, errorMessage} = value;\r\n    if(status === 'done') {\r\n        if(value.items.length === 0) {\r\n            return 'Not found'\r\n        }\r\n        return required(value);\r\n    }\r\n    return status === 'loading' ? context.lastError() : errorMessage || 'Ajax error';\r\n}\r\n\r\nexport function ajaxFeed<T>(context: AsyncContextBase, value: T, args: AjaxFeedParams<T>): AjaxChoiceInfo<T> {\r\n    const onSuccess = function (data: any, ctx: AsyncContextBase){\r\n        try {\r\n            let items: any[] = Array.isArray(data && data.result) ? data.result : [];\r\n            ctx.result({ \r\n                value : value,\r\n                items: args.mapper ? items.map(args.mapper) : items,\r\n                status: AjaxStatus.done\r\n            });\r\n        } catch (e) {\r\n            ctx.result({value : value, items: [], status: AjaxStatus.error, errorMessage: e.message});\r\n        }\r\n    }\r\n    const onReject = (xhr: XMLHttpRequest|Error, ctx: AsyncContextBase) => {\r\n        ctx.result({ \r\n            value : value,\r\n            items: [],\r\n            status: AjaxStatus.error,\r\n            errorMessage: xhr instanceof XMLHttpRequest ? xhr.responseText.substr(0, 500) + \"...\" : xhr.message\r\n        })\r\n    };\r\n    let p = ajaxCache.get(args.query);\r\n    if(!p.done) {\r\n        context.await(p.promise, onSuccess, onReject);\r\n        context.result({value : value, items: [{value: undefined, description: \"Loading...\"}], status: AjaxStatus.loading});\r\n    } else {\r\n        ( p.done===\"success\" ? onSuccess : onReject )(p.result, context);\r\n    }\r\n    return undefined;\r\n}\r\n","import { IArfSet, ModelProxy, Listener, Watcher, ListenerEvent } from \"./proxy\";\r\n\r\nexport type Diff<T extends string | number | symbol, U extends string | number | symbol> = ({[P in T]: P } & {[P in U]: never } & { [x: string]: never })[T];  \r\nexport type Omit<T, K extends keyof T> = Pick<T, Diff<keyof T, K>>;\r\n\r\n\r\nexport enum ValidationStrategy {\r\n    None,\r\n    Always,\r\n    Followup,\r\n    Notified,\r\n    Validate\r\n}\r\n\r\nfunction doValidation(events: ListenerEvent[], vstrategy: ValidationStrategy) {\r\n    vstrategy = vstrategy === undefined ? ValidationStrategy.Validate : vstrategy;\r\n    if(vstrategy === undefined || vstrategy === ValidationStrategy.Validate ){\r\n        return events.some(e => 'validate' === e.action)\r\n    }\r\n    return vstrategy === ValidationStrategy.Always || vstrategy === ValidationStrategy.Notified && events[0].action != 'init'\r\n}\r\n\r\nfunction errorwatch(node: LogicNode, target: 'peers' | string | LogicNode, reducer: Function) {\r\n    let error = '';\r\n    let myModel = node.model;\r\n    let erroringChildren: Set<LogicNode> = new ModelProxy(target === 'peers' ? node.parent : target, null, null, true, node.runtime.evListener).forWatcher(node).get('erroringChildren');\r\n    if(target === 'peers') {\r\n        erroringChildren.forEach(\r\n            node => myModel.hasChild(node.model) && (error = reducer ? reducer(error, node.lastError) : node.lastError)\r\n        )\r\n    } else {\r\n        erroringChildren.forEach(\r\n            node => error = reducer(error, node.lastError)\r\n        )\r\n    }\r\n    return error;\r\n}\r\n    \r\nexport class ContextModel<M> implements AsyncContextBase {\r\n    $runtime: LogicProcessor\r\n    $node: LogicNode\r\n    $model: ModelProxy<M>\r\n    $unbound: ModelProxy<M>\r\n    $await: Promise<any>\r\n\r\n    constructor(model: ModelProxy<M>, unbound: ModelProxy<M>, runtime: LogicProcessor, node: LogicNode) {\r\n        this.$runtime = runtime;\r\n        this.$node = node;\r\n        this.$model = model;\r\n        this.$unbound = unbound;\r\n        this.$await = null;\r\n    }\r\n    result(data: any, error?: string) {\r\n        let node = this.$node;\r\n        if(data !== undefined) {\r\n            if(error === undefined) {\r\n                let {lastNotifications, field, lastError} = node;\r\n                if(field.errorwatch) {\r\n                    let { target = node, accept = (a: string, b: string) => b } = typeof field.errorwatch === 'object' ? field.errorwatch : {};\r\n                    error = errorwatch(node, target, accept);\r\n                } else {\r\n                    let validationResult = '';\r\n                    try {\r\n                        validationResult = (lastError || doValidation(lastNotifications, field.vstrategy)) && field.val && field.val(data, node.model, this, lastNotifications) || '';\r\n                    } catch(e) {\r\n                        validationResult = e.message || 'exception';\r\n                    }\r\n                    error = typeof validationResult === 'string' ? validationResult : '';\r\n                }\r\n            }\r\n            node.accept(data, error);\r\n        } else {\r\n            if(error !== undefined) {\r\n                node.accept(node.lastData, error);\r\n            }\r\n        }\r\n    }\r\n    reject() {\r\n        this.$node.notify({action: 'notify'});\r\n    }                \r\n    destroy() {\r\n        this.$await = null;\r\n        this.$model.$listener.undepend();\r\n    }\r\n    await<T>(promise: Promise<T>, onSuccess?: (data: T, context: this) => T, onReject?: (reason: any, context: this) => void): void {\r\n        this.$await = promise.then( a => (this.$await = null, onSuccess && onSuccess(a, this)), b => (this.$await = null, onReject && onReject(b, this)) );\r\n    }\r\n    lastError() {\r\n        return this.$node.lastError;\r\n    }    \r\n}\r\n\r\n\r\ninterface FieldProps<P, C> {\r\n    get?: (proxy: P, context: ContextModel<P>, events?: ListenerEvent[]) => C\r\n    val?: (value: C, proxy?: P, context?: ContextModel<P>, events?: ListenerEvent[]) => void|string\r\n    errorwatch?: boolean|{target: string|LogicNode, accept: (prev?: string, next?: string) => string }\r\n    vstrategy?: ValidationStrategy\r\n}\r\n\r\ntype ArrayItem<A> = A extends Array<infer I> ? I : never\r\nexport class Field<P extends IArfSet, D=P> {\r\n    get: (proxy: P, context: ContextModel<P>, events?: ListenerEvent[]) => D\r\n    val?: (value: any, proxy: IArfSet, context: ContextModel<P>, events: ListenerEvent[]) => void|string\r\n    errorwatch: boolean|{target: \"peers\"|string|LogicNode, accept: (prev: string, next: string) => string }\r\n    vstrategy: ValidationStrategy\r\n\r\n    children: Field<ArrayItem<D>, any>[] = []\r\n    constructor(props: FieldProps<P, D>) {\r\n        this.children = [];\r\n        this.get = (model: P) => model as any;\r\n        Object.assign( this, props );\r\n    }\r\n    with(...args: Field<ArrayItem<D>, any>[]): this {\r\n        this.children = args.reduce((out, cur) => out.concat(cur), []).filter(o => o instanceof Field);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport interface PipeNode {\r\n    terminated?: boolean\r\n    lastData?: any\r\n    lastError?: string\r\n    source?: PipeNode\r\n    consumer?: PipeNode // PipeNode[]\r\n    accept(data: any, error?: string): any\r\n    terminate(): any\r\n    //follow(target: PipeNode): any\r\n}\r\n\r\nexport class LogicNode implements PipeNode, Watcher {\r\n    key: string\r\n    parent: LogicNode\r\n    lastData: any\r\n    lastError: any   \r\n    field: Field<any, any>\r\n    terminated: boolean\r\n    //source: PipeNode TODO: chain\r\n    consumer: PipeNode // TODO: multiple consumers\r\n    runtime: LogicProcessor\r\n    notifications?: ListenerEvent[] = []\r\n    lastNotifications: ListenerEvent[]\r\n    children:  Map<number, Map<Field<any, any>, LogicNode>> = new Map()\r\n    erroringChildren: Set<LogicNode> = new Set()\r\n    model: ModelProxy<any>\r\n    context: ContextModel<any>\r\n\r\n    constructor(parent: LogicNode, field: Field<any, any>, proxy: ModelProxy<any>, runtime: LogicProcessor) {\r\n        let unbound = proxy.forWatcher();\r\n        this.parent = parent;\r\n        this.runtime = runtime;\r\n        this.key = \"field:\" + unbound.key;//field.name + '-' + unbound.key;\r\n        this.field = field;\r\n        this.model = unbound.forWatcher(this);\r\n        this.context = new ContextModel(this.model, unbound, runtime, this);\r\n    }\r\n    notify(action?: ListenerEvent|ListenerEvent[]) {\r\n        if(!this.terminated) {\r\n            Array.isArray(action) ? this.notifications.splice(this.notifications.length, 0, ...action) : this.notifications.push(action || { action : 'self' });\r\n            this.runtime.scheduleWork(this);\r\n        }\r\n        return this;\r\n    }\r\n    accept(data: any, error?: string) {\r\n        if(!this.terminated) {\r\n            let childrenFields = this.field.children;\r\n            if(data !== undefined) {\r\n                // todo: evaliate lastData vs data and maybe skip rendering/child reconciliation \r\n                if(!this.field.errorwatch) {\r\n                    error ? this.runtime.notifyErroring(this) : this.runtime.clearError(this);\r\n                }\r\n                if(childrenFields.length) {\r\n                    let arr = data && typeof data === 'object' ? ( Array.isArray(data) ? data : [data] ) : []\r\n                    // ??\r\n                    //arr.map(d => d instanceof JsonProxy ? d : new JsonProxy(d));\r\n                    this.runtime.reconcileChildren(this, arr, this.lastNotifications);\r\n                }\r\n                this.lastData = data;\r\n                this.lastError = error;\r\n                this.consumer && this.consumer.accept(data, error);\r\n                //this.shouldRender = true;\r\n                this.runtime.scheduleWork(this);\r\n            } else {\r\n                error && (this.lastError = error) && this.runtime.notifyErroring(this);\r\n            }\r\n        }\r\n    }\r\n    terminate() {\r\n        //this.control.destroy();\r\n        if(!this.terminated) {\r\n            this.context.destroy();\r\n            if(this.parent) {\r\n                let fieldMap = this.parent.children.get(this.model.key);\r\n                if(fieldMap) {\r\n                    fieldMap.delete(this.field);\r\n                    fieldMap.size || this.parent.children.delete(this.model.key);\r\n                }\r\n                this.parent = null;\r\n            }\r\n            this.terminated = true;\r\n            this.consumer && this.consumer.terminate();\r\n            this.consumer = null;\r\n        }\r\n    }\r\n}\r\n\r\n//###############################################################################################################################\r\n\r\nexport function testChoice(a: any, b: any): boolean {\r\n    return a == b || typeof a === 'object' && typeof b === 'object' && Object.keys(a).every(i => a[i] == b[i]);\r\n}\r\n\r\nexport let arfDatePattern = /^(18|19|20)((\\\\d\\\\d(((0[1-9]|1[012])(0[1-9]|1[0-9]|2[0-8]))|((0[13578]|1[02])(29|30|31))|((0[4,6,9]|11)(29|30))))|(([02468][048]|[13579][26])0229))$/;\r\n\r\nexport function required<T>(value: string|number|ChoiceInfo<T>, pattern?: RegExp|string, message?: string): string {\r\n    if( !value || value.toString().replace(/ /g, '') === '' ) {\r\n        return message || 'Required';\r\n    } else {\r\n        if( typeof value === 'object' && Array.isArray(value.items) ) {\r\n            let v = value.value;\r\n            if( !v || v.toString().replace(/ /g, '') === '' ) {\r\n                return message || 'Required';\r\n            }\r\n            return value.items.some( item => testChoice(v, item.value !== undefined ? item.value : item) ) ? '' : message || 'Required';\r\n        }\r\n        if( pattern === 'date' && !value.toString().match(arfDatePattern) || pattern instanceof RegExp && ! value.toString().match(pattern) ) {\r\n            return message || 'Invalid format';\r\n        }\r\n        return '';\r\n    }\r\n}\r\n\r\nexport interface ValueDescription<T> { value: T, description: string }\r\nexport interface ChoiceInfo<T> {\r\n    value: T,\r\n    items: ValueDescription<T>[],\r\n}\r\n\r\nexport interface AsyncContextBase {\r\n    result<T>(data: T, error?: string): void,\r\n    await<T>(promise: Promise<T>, onSuccess?: (data: T, context: this) => T, onReject?: (reason: any, context: this) => void): void,\r\n    reject(): void,\r\n    lastError(): string\r\n}\r\n//###############################################################################################################################\r\n\r\nexport class LogicProcessor<M={}> {\r\n    // TODO: this is technically leaking memory (watchers are not removed when runtime shuts down when this is static).\r\n    // I've made it non-static, so it gets disposed of every time runtime is shut down. But it s better to figure out why and fix.\r\n    evListener = new Listener({});\r\n    nodes: LogicNode[]\r\n    scheduledWork: any\r\n    rootModel: M\r\n    constructor(rootProxy: ModelProxy<M>, rootField: Field<any, any>, validate: boolean) {\r\n        this.nodes = [];\r\n        this.scheduledWork = null;\r\n        this.addNode( null, rootProxy, rootField, [{ action: validate ? \"validate\" : \"init\" }] );\r\n        this.rootModel = this.nodes[0].model as any;\r\n        this.processInterceptors();\r\n    }\r\n    scheduleWork(node: LogicNode) {\r\n        this.scheduledWork || (this.scheduledWork = (typeof setImmediate === \"function\" ? setImmediate : setTimeout)(this.processInterceptors.bind(this)));\r\n    }\r\n    destroy() { \r\n        this.scheduledWork && (typeof clearImmediate === \"function\" ? clearImmediate : clearInterval)(this.scheduledWork);\r\n        this.scheduledWork=null;\r\n        if(this.nodes.length) {\r\n            let root = this.nodes[0];\r\n            this.evictNode(root);\r\n            this.nodes = []\r\n        }\r\n    }\r\n    enforceValidation(readyCb?: (rejectReason?: any) => void) {\r\n        this.nodes.forEach(node => node.notify({action: 'validate'}));\r\n        readyCb && this.waitForPipeLine(readyCb);\r\n    }      \r\n    waitForPipeLine(readyCb: (rejectReason?: any) => void) {\r\n        let pending:any[] = [];\r\n        try {\r\n            this.processInterceptors();\r\n            this.scheduledWork || (pending = this.nodes.map(n => n.context.$await).filter(a => !!a)).length ? \r\n                Promise.all(pending).then(this.waitForPipeLine.bind(this, readyCb), readyCb) : readyCb();\r\n        } catch(e) {\r\n            readyCb(e);\r\n        }\r\n    }\r\n    processInterceptors() {\r\n        if(this.scheduledWork) {\r\n            this.scheduledWork = null;\r\n            for(let i = 0; i < this.nodes.length; i++) {\r\n                this.logic(this.nodes[i]);\r\n            }\r\n            let cur = 0;\r\n            this.nodes.forEach( node => node.terminated || (this.nodes[cur++] = node) );\r\n            this.nodes.splice(cur);\r\n        }\r\n    }\r\n    addNode(parent: LogicNode, proxy: ModelProxy<any>, field: Field<any, any>, initAction: ListenerEvent[]) {\r\n        let node = new LogicNode(parent, field, proxy, this);\r\n        node.notify(initAction);\r\n        this.nodes.push(node);\r\n        return node;\r\n    }\r\n    evictNode(node: LogicNode) {\r\n        this.clearError(node);\r\n        node.terminated = true;\r\n        node.children.forEach(fieldMap => fieldMap.forEach( node => this.evictNode(node)));\r\n        node.terminate();\r\n    }        \r\n    clearError(node: LogicNode) {\r\n        if( node.lastError ) {\r\n            delete node.lastError;\r\n            for( let cur = node.parent; cur && cur.erroringChildren.delete(node); cur = cur.parent ) {\r\n                this.evListener.notify(cur.key, 'erroringChildren');\r\n            }\r\n        }\r\n    }\r\n    notifyErroring(node: LogicNode) {\r\n        for( let cur = node.parent; cur && !cur.erroringChildren.has(node); cur = cur.parent ) {\r\n            cur.erroringChildren.add(node), this.evListener.notify(cur.key, 'erroringChildren', 'validate'); \r\n        }\r\n    }\r\n    reconcileChildren(parent: LogicNode, rowProxies: ModelProxy<any>[], events: ListenerEvent[]) {\r\n        let childFields = parent.field.children;\r\n        let lastChildren = parent.children;\r\n        if( lastChildren.size || childFields.length ) {\r\n            let rows: Map<number, ModelProxy<any>> = new Map();\r\n            let rkeys: Set<number> = new Set();\r\n            let m: Map<Field<any, any>, LogicNode>, present: ModelProxy<any>;\r\n            lastChildren.forEach( (_, k) => rkeys.add(k) );\r\n            rowProxies.forEach(r => { rows.set(r.key, r); rkeys.add(r.key)});\r\n            rkeys.forEach( r => { \r\n                present = rows.get(r); \r\n                if(m = lastChildren.get(r)) {\r\n                    present || (childFields.forEach(k => this.evictNode(m.get(k))), lastChildren.delete(r));\r\n                } else {\r\n                    lastChildren.set(r, m = new Map()); \r\n                    childFields.forEach(k => m.set(k, this.addNode(parent, present, k, events)));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    logic(node: LogicNode) {\r\n        if(node.notifications.length && !node.terminated) {\r\n            node.lastNotifications = node.notifications;\r\n            node.notifications = [];\r\n            let {context, field, model} = node;\r\n            try {\r\n                context.result(field.get(model, context, node.lastNotifications));\r\n            } catch(e) {\r\n                context.result(undefined, e.message);\r\n                console.error(node.field + '\\n' + e.message + '\\n' + e.stack); \r\n            }\r\n        }\r\n    }\r\n    findNodes<T, D>(field: Field<T, D>, modelKey: number|string) {\r\n        return this.nodes.filter( node => node.field === field && node.model.key === modelKey );\r\n    }\r\n}//const { Provider: LogicContextProvider, Consumer: LogicContextConsumer} = React.createContext({} as LogicProcessor);\r\n","/**\r\n * @Enumerable decorator that sets the enumerable property of a class field to false.\r\n * @param value true|false\r\n */\r\nexport function Enumerable(value: boolean) {\r\n    return function (target: any, propertyKey: string) {\r\n        let descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};\r\n        if (descriptor.enumerable != value) {\r\n            descriptor.enumerable = value;\r\n            Object.defineProperty(target, propertyKey, descriptor)\r\n        }\r\n    };\r\n}\r\n\r\nexport function Observable<T, P extends ModelProxy<T>, A=new (data: T, parent: ModelProxy<any>, parentCollection: string, single: boolean, listener: Listener) => P>(proxyClass?: A|A[]) {\r\n    return function (target: any, propertyKey: string) {\r\n        if(proxyClass) {\r\n            const isSubset = typeof proxyClass === \"function\";\r\n            isSubset || (proxyClass = (proxyClass as any)[0]);\r\n            Object.defineProperties(target, {\r\n                [propertyKey]: {\r\n                    enumerable: true,\r\n                    get: isSubset ? function() {\r\n                        return this.getSubset(propertyKey, proxyClass)\r\n                    } : function() {\r\n                        return this.getSublist(propertyKey, proxyClass)\r\n                    }\r\n                },\r\n                [\"$_c_\"+propertyKey]: {\r\n                    enumerable: true,\r\n                    value: function(value: any) {\r\n                        ProxyUtils.copy(this[propertyKey], value);\r\n                    }\r\n                },\r\n                [\"$_r_\"+propertyKey]: {\r\n                    enumerable: true,\r\n                    value: function(value: any) {\r\n                        ProxyUtils.reflect(this[propertyKey], value);\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            Object.defineProperty(target, propertyKey, {\r\n                enumerable: true,\r\n                get: function() {\r\n                    return this.get(propertyKey) || \"\"\r\n                },\r\n                set: function(value) {\r\n                    this.set(propertyKey, value)\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IArfSet {\r\n    readonly p? : IArfSet;\r\n    readonly key? : number;\r\n}\r\n\r\nexport interface ListenerEvent { key? : number|string, element? : string, action?: string }\r\n\r\nexport interface Watcher {\r\n    notify(action?: ListenerEvent): void;\r\n}\r\n\r\nexport class Listener {\r\n    // TODO: this is still an issue. loop over Core.startRuntime multiple times causes memory leaks when passing same data object. Workaround is to pass different data object (shallow copy is fine). \r\n    static modelWatchMap: WeakMap<IArfSet, Map<string, Set<Watcher>>> = new WeakMap();\r\n    static getRootDependencyMap(model: IArfSet) {\r\n        if(model) {\r\n            let p;\r\n            if(model instanceof ModelProxy) {\r\n                for(p = model; p.$parent; p = p.$parent) ;\r\n                p = p.$data; // $persisted ?\r\n            } else {\r\n                for(p = model; p.p; p = p.p) ;\r\n            }\r\n            let m = Listener.modelWatchMap.get(p);\r\n            m || Listener.modelWatchMap.set(p, m = new Map());\r\n            return m;\r\n        }\r\n        return new Map();\r\n    }\r\n\r\n    dpMap: Map<string, Set<Watcher>>\r\n    node?: Watcher\r\n    dependencies?: string[]\r\n    constructor(model: IArfSet|Listener, node?: Watcher) {\r\n        this.dpMap = model instanceof Listener ? model.dpMap : Listener.getRootDependencyMap(model);\r\n        this.node = node;\r\n        this.dependencies = [];\r\n    }\r\n    undepend() {\r\n        this.dependencies.forEach(dpKey => {\r\n            let ctlSet = this.dpMap.get(dpKey);\r\n            if(ctlSet) {\r\n                ctlSet.delete(this.node);\r\n                ctlSet.size || this.dpMap.delete(dpKey);\r\n            }\r\n        })\r\n    }\r\n    depend(key: number|string, element: string) {\r\n        if(this.node) {\r\n            let dpKey = key + '-' + element, e = this.dpMap.get(dpKey);\r\n            e || this.dpMap.set(dpKey, e = new Set());\r\n            if(!e.has(this.node)) {\r\n                e.add(this.node);\r\n                this.dependencies.push(dpKey);\r\n            }\r\n        }\r\n    }\r\n    notify(key: number|string, element: string, action?: string, value?: any) {\r\n        let dpKey = key + '-' + element, e = this.dpMap.get(dpKey);\r\n        e && e.forEach(node => node.notify({key : key, element : element, action : action}));\r\n        return true;\r\n    }\r\n    set(proxy: ModelProxy<any>, element: string, value: any, action: string) { \r\n        if(proxy.$data[element] != value) { proxy.$data[element] = value; this.notify(proxy.key, element, action) }; return true; \r\n    }\r\n    get(proxy: ModelProxy<any>, element: string) { \r\n        this.depend(proxy.key, element); \r\n        return proxy.$data[element]; \r\n    }\r\n}\r\n\r\nexport let JsonProxyKeygey = (function() {\r\n    let counter = 0;\r\n    return function() {\r\n        return ++counter;\r\n    }\r\n})()\r\n\r\nexport class JsonProxyArray<P extends ModelProxy<T>, T> extends Array<P> {\r\n    $parent: ModelProxy<any>\r\n    $parentCollection: string\r\n    $clazz: new (data: T, parent?: ModelProxy<any>, parentCollection?: string, single?: boolean, listener?: Listener) => P\r\n    constructor(parent: ModelProxy<any>, parentCollection: string, clazz: new (data: T, parent: ModelProxy<any>, parentCollection: string, single: boolean, listener: Listener) => P) {\r\n        if(typeof parent === 'number') {\r\n            super(parent);\r\n        } else {\r\n            super();\r\n            Array.prototype.push.apply(this, (<Array<T>>parent.get(parentCollection) || []).map(item => new clazz(item, parent, parentCollection, false, parent.$listener)));\r\n        }\r\n        this.$parent = parent;\r\n        this.$parentCollection = parentCollection;\r\n        this.$clazz = clazz;\r\n        Object.setPrototypeOf(this, JsonProxyArray.prototype);\r\n    }\r\n    push(...items: (P|T)[]): number {\r\n        return Array.prototype.push.apply(this, \r\n            items.map( item => {\r\n                let proxy = (new this.$clazz(<T>{}, this.$parent, this.$parentCollection, false, this.$parent.$listener));\r\n                ProxyUtils.copy(proxy, item);\r\n                this.$parent.append(this.$parentCollection, false, proxy.$data);\r\n                return proxy;\r\n            })\r\n        );\r\n    }\r\n    shadow(item?: P|T): P {\r\n        let proxy = (new this.$clazz(<T>{}, this.$parent, this.$parentCollection, false, this.$parent.$listener));\r\n        typeof item === 'object' && ProxyUtils.copy(proxy, item);\r\n        proxy.$persisted = null;\r\n        return proxy;\r\n    }\r\n    pop(): P { throw \"Unsupported\"; }\r\n    splice(start: number, deleteCount?: number, ...items: P[]): P[] { throw \"Unsupported\"; }\r\n    shift(): P { throw \"Unsupported\"; }\r\n    unshift(...items: P[]): number { throw \"Unsupported\"; }\r\n    reverse(): P[] { throw \"Unsupported\"; }\r\n    /*sort(cb?: (a: P, b: P) => number): this { throw \"Unsupported\"; }*/\r\n    fill(): this { throw \"Unsupported\"; }\r\n    copyWithin(): this { throw \"Unsupported\"; }\r\n    indexOf(item: P)  {\r\n        return item instanceof ModelProxy ? [].indexOf.call(this.map(a => a.$data), item.$data) : -1;\r\n    }\r\n}\r\n\r\nexport class ModelProxy<T extends IArfSet & {[index: string]: any}> implements IArfSet {\r\n    $data: {[index: string]: any}\r\n    $persisted: {}\r\n    $parent?: ModelProxy<any>\r\n    $listener? : Listener\r\n    $parentCollection: string\r\n    $single: boolean\r\n    constructor(data: {}, parent?: ModelProxy<any>, parentCollection?: string, single?: boolean, listener?: Listener) {\r\n        this.$persisted = data;\r\n        this.$data = <T>(data||{});\r\n        this.$parent = parent||null;\r\n        this.$listener = listener||new Listener(this);\r\n        this.$single = single===undefined?true:single;\r\n        this.$parentCollection = parentCollection||'';\r\n    }\r\n    @Enumerable(false)\r\n    get key(): number {\r\n        let data = this.$data as any, key = data.key;\r\n        key || Object.defineProperty(data, 'key', {enumerable: false, value: key = JsonProxyKeygey()});\r\n        return key;\r\n    }\r\n    @Enumerable(false)\r\n    get p() {\r\n        return this.$parent.forWatcher(this.$listener.node);\r\n    }\r\n    forWatcher(watcher?: Watcher): this {\r\n        let ctor = this.constructor as new (data: {}, parent: ModelProxy<any>, parentCollection: string, single: boolean, listener: Listener) => this;\r\n        let ret = new ctor(this.$data, this.$parent, this.$parentCollection, this.$single, new Listener(this.$listener, watcher));\r\n        ret.$persisted = this.$persisted;\r\n        return ret;\r\n    }\r\n    get(element: string): any {\r\n        this.$listener.depend(this.key, element);\r\n        return this.$data[element];\r\n    }\r\n    getSubset<C extends IArfSet, P extends ModelProxy<C>>(element: string, proxyClass: new (data: C, parent: ModelProxy<any>, parentCollection: string, single: boolean, listener: Listener) => P): P {\r\n        if(element) {\r\n            return new proxyClass( this.get(element), this, element, true, this.$listener );\r\n        }\r\n        return new proxyClass( <any>this.$data, this, null, true, this.$listener );\r\n    }\r\n    getSublist<C extends IArfSet, P extends ModelProxy<C>>(element: string, proxyClass: new (data: C, parent: ModelProxy<any>, parentCollection: string, single: boolean, listener: Listener) => P): Array<P> {\r\n        return new JsonProxyArray<P, C>(this, element, proxyClass);\r\n    }\r\n    append(element: string, single?: boolean, data?: any) {\r\n        this.persist();\r\n        if(element) {\r\n            if(single) {\r\n                let obj: {} = this.$data[ element ];\r\n                if( !obj || typeof obj !== 'object' ) {\r\n                    obj = this.$data[ element ] = data||{};\r\n                    this.$listener.notify(this.key, element, 'a');\r\n                } else {\r\n                    // TODO: merge ? \r\n                }\r\n                return obj;\r\n            } else {\r\n                let arr: any[] = this.$data[ element ], obj = data||{};\r\n                if( ! Array.isArray(arr) ) {\r\n                    this.$data[ element ] = arr = [];\r\n                }\r\n                arr.push(obj);\r\n                this.$listener.notify(this.key, element, 'a');\r\n                return obj;\r\n            }\r\n        }\r\n        return this.$data;\r\n    }\r\n    set(element: string, value?: any) {\r\n        if(value === undefined || value === null || value === '') {\r\n            if(this.$data.hasOwnProperty(element)) {\r\n                delete this.$data[element];\r\n                this.$listener.notify(this.key, element, 'd');\r\n            }\r\n        } else {\r\n            this.persist();\r\n            if(this.$data[element] !== value) {\r\n                this.$data[element] = value;\r\n                this.$listener.notify(this.key, element, 'm');\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n    persist() {\r\n        if(this.isShadow() && this.$parent) {\r\n            // TODO: merge ? \r\n            this.$persisted = this.$data = this.$parent.append(this.$parentCollection, this.$single, this.$data);\r\n        }\r\n    }\r\n    detach() {\r\n        if(this.$parent) {\r\n            if(this.$persisted) {\r\n                if(this.$parentCollection) {\r\n                    let collection: {}[] = this.$parent.$data[this.$parentCollection];\r\n                    if(collection) {\r\n                        collection.splice(collection.indexOf(this.$persisted), 1);\r\n                        collection.length || delete this.$parent.$data[this.$parentCollection];\r\n                        this.$listener.notify(this.$parent.key, this.$parentCollection, 'r');\r\n                    }\r\n                } else {\r\n                    this.$parent.detach();\r\n                }\r\n                this.$persisted = undefined;\r\n            }\r\n        } else {\r\n            throw 'attempt to detach root';\r\n        }\r\n    }\r\n    isShadow() {\r\n        return !this.$persisted;\r\n    }\r\n    hasChild(other: ModelProxy<any>): boolean {\r\n        for(; other && this.$data !== other.$data; other = other.$parent) {}\r\n        return !!other;\r\n    }\r\n}\r\n\r\nexport namespace ProxyUtils {\r\n    export function castAs<T extends IArfSet>(data: {}, impl: new (data: {}, parent?: any, parentCollection?: any, single?: boolean) => ModelProxy<T>) : T {\r\n        return typeof impl === \"function\" ? <any>(new impl(data, null, null, true)) : data;\r\n    }\r\n\r\n    export function detach<T extends IArfSet>(v: T) {\r\n        if(v instanceof ModelProxy) {\r\n            v.detach();\r\n        } else {\r\n            throw \"Not an instance of supported class\";\r\n        }\r\n    }\r\n\r\n    export function copy<T>(dest: T, src: Partial<T>): T {\r\n        return merge(dest, src, false);\r\n    }\r\n\r\n    export function reflect<T>(dest: T, src: Partial<T>): T {\r\n        return merge(dest, src, true);\r\n    }\r\n\r\n    export function unwrap<T>(src: T): T {\r\n        return src instanceof ModelProxy ? src.$data as T : src;\r\n    }\r\n\r\n    export function wrapAs<T>(data: {}, proto: T|T[]): T {\r\n        if(proto instanceof ModelProxy) {\r\n            return castAs(data, <any>proto.constructor);\r\n        }\r\n        if(proto instanceof JsonProxyArray) {\r\n            return castAs(data, (<JsonProxyArray<ModelProxy<T>, T>>proto).$clazz);\r\n        }\r\n        throw \"Not an instance of supported class\";\r\n    }\r\n\r\n    export function shadow<T extends IArfSet>(array: T[], item?: T): T {\r\n        return (<any>array).shadow(item);\r\n    }\r\n\r\n    export function isDetached(target: IArfSet) {\r\n        return target instanceof ModelProxy && target.isShadow();\r\n    }\r\n\r\n    export function persist(target: IArfSet) {\r\n        target instanceof ModelProxy && target.persist();\r\n    }\r\n\r\n    function merge<T>(dest: T, src: Partial<T>, deleteMissing: boolean): T {\r\n        if(dest instanceof ModelProxy) {\r\n            mergeSubstet(dest, src, deleteMissing);\r\n        } else if( dest instanceof JsonProxyArray ) {\r\n            mergeArrays(<any>dest, <any>src, deleteMissing);\r\n        } else {\r\n            throw \"Not an instance of supported class\";\r\n        }\r\n        return dest;\r\n    }\r\n\r\n    function mergeSubstet<S, D extends S>(dest: ModelProxy<D>, other: S, deleteMissing: boolean) {\r\n        // TODO: it would be nice to memorize list of cloneable properties for every class\r\n        // perhaps make map (ctor, ctor) => {list of properties to copy}, like Java proxies do in \"reflect/copy\"\r\n        let myFields: Set<string> = new Set(), otherFields: Set<string> = new Set(), writeEmpty = !(other instanceof ModelProxy);\r\n        Object.keys(dest.constructor.prototype).forEach(prop => prop.charAt(0) !== '$' && prop !== 'constructor' && myFields.add(prop) );\r\n        if(typeof other === 'object' && other !== null) {\r\n            Object.keys(other instanceof ModelProxy ? dest.constructor.prototype : other).forEach(prop => otherFields.add(prop));\r\n        }\r\n        let prefix = deleteMissing ? '$_r_' : '$_c_', func;\r\n        myFields.forEach( prop => {\r\n            if( typeof (func = (<any>dest)[prefix + prop]) === 'function' ) {\r\n                otherFields.has(prop) ? func.call(dest, (<any>other)[prop]) : deleteMissing && func.call(dest);\r\n            } else {\r\n                let v: any = otherFields.has(prop) ? (<any>other)[prop] : undefined;\r\n                if(v !== null && v !== undefined && (v !== \"\" || writeEmpty) && v !== false || deleteMissing) {\r\n                    (<any>dest)[prop] = v;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function mergeArrays<T>(dest: T[], src: T[], deleteMissing: boolean): void {\r\n        src = src||[];\r\n        if(deleteMissing) {\r\n            for(let i = 0; i < dest.length && i < dest.length; i++) {\r\n                if(i === src.length) {\r\n                    dest.splice(i);\r\n                } else if(i === dest.length) {\r\n                    dest.push(src[i]);\r\n                } else {\r\n                    merge(dest[i], src[i], true);\r\n                }\r\n            }\r\n        } else {\r\n            src.forEach(i => dest.push(i));\r\n        }\r\n    }\r\n}","export module utils {\r\n    let modifiedSince: any;\r\n\r\n    export function setDfeCustomStyle(css: string, formname?: string): void {\r\n        if(typeof document == 'object') {\r\n            var e = formname && document.getElementById(formname + '-custom-style') || document.head.appendChild(document.createElement('style'));\r\n            formname && e.setAttribute('id', formname + '-custom-style');\r\n            e.innerHTML = css;\r\n        }\r\n    }\r\n    \r\n    export function reloadIfSourceChanged(interval: number): void {\r\n        if(!modifiedSince) {\r\n            modifiedSince = (new Date() as any).toGMTString();\r\n            let keepGoing = true;\r\n            setInterval(function() {\r\n                var scripts = document.querySelectorAll('script[src]');\r\n                for(var i = 0; keepGoing && i < scripts.length; i++) {\r\n                    (function(url) {\r\n                        if(new URL(url).hostname === new URL(location.href).hostname ) {\r\n                            var xhr = new XMLHttpRequest();\r\n                            xhr.open(\"HEAD\", url, true);\r\n                            xhr.setRequestHeader(\"If-Modified-Since\", modifiedSince);\r\n                            xhr.onreadystatechange = function() {\r\n                                if(keepGoing && xhr.readyState === 4 && xhr.status === 200) { // Modified\r\n                                    keepGoing = false;\r\n                                    setTimeout(() => location.reload(), 1000);\r\n                                }\r\n                            }\r\n                            xhr.send();\r\n                        }\r\n                    })((scripts[i] as HTMLScriptElement).src)\r\n                }\r\n            }, interval);\r\n        }\r\n    }\r\n}","var map = {\n\t\"./quote.cmau.car\": [\n\t\t\"./src/ts/forms/quote.cmau.car.tsx\",\n\t\t9,\n\t\t5,\n\t\t7,\n\t\t1\n\t],\n\t\"./quote.cmau.car.css\": [\n\t\t\"./src/ts/forms/quote.cmau.car.css\",\n\t\t7,\n\t\t5,\n\t\t0\n\t],\n\t\"./quote.cmau.car.tsx\": [\n\t\t\"./src/ts/forms/quote.cmau.car.tsx\",\n\t\t9,\n\t\t5,\n\t\t7,\n\t\t1\n\t],\n\t\"./quote.work.class\": [\n\t\t\"./src/ts/forms/quote.work.class.tsx\",\n\t\t9,\n\t\t5,\n\t\t6,\n\t\t7,\n\t\t3\n\t],\n\t\"./quote.work.class.css\": [\n\t\t\"./src/ts/forms/quote.work.class.css\",\n\t\t7,\n\t\t5,\n\t\t2\n\t],\n\t\"./quote.work.class.tsx\": [\n\t\t\"./src/ts/forms/quote.work.class.tsx\",\n\t\t9,\n\t\t5,\n\t\t6,\n\t\t7,\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn Promise.all(ids.slice(2).map(__webpack_require__.e)).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./src/ts/forms lazy recursive ^\\\\.\\\\/.*$\";\nmodule.exports = webpackAsyncContext;","import * as ReactDOM from \"react-dom\";\r\nimport * as React from \"react\";\r\nimport { LogicProcessor } from \"./api/dfe-stream\";\r\n\r\nimport \"../../resources/es-polyfill\";\r\n\r\nimport { ProxyUtils } from \"./api/proxy\";\r\nimport { ajaxCache } from \"./api/ajaxCache\";\r\nimport { utils } from \"./api/utils\";\r\n\r\nutils.reloadIfSourceChanged(2000);\r\n\r\nconst validateButton = document.body.appendChild(document.createElement(\"input\"));\r\nvalidateButton.value = \"Validate All\";\r\nvalidateButton.type = \"button\";\r\n\r\ndocument.body.appendChild(document.createElement(\"br\"));\r\nconst node = document.body.appendChild(document.createElement(\"div\"));\r\ndeclare const cachePrimer: {key: string, value: any}[]\r\n\r\ntypeof cachePrimer === 'object' && Array.isArray(cachePrimer) && cachePrimer.forEach(\r\n    item => ajaxCache.storage.set(item.key, {done: \"success\", result: item.value, promise: Promise.resolve(item.value)})\r\n);\r\n\r\n(async () => {\r\n    let formName = \"quote.cmau.car\";\r\n    let { FormComponent, form, modelImpl } = await import(\"./forms/\" + formName);\r\n    let jsonModel = require(\"../../test/model.json\"), logic: LogicProcessor;\r\n\r\n    ReactDOM.render(<FormComponent model = {(logic = new LogicProcessor(ProxyUtils.castAs(jsonModel, modelImpl), form, false)).rootModel}/>, node);\r\n    validateButton.addEventListener('click', () => {\r\n        $.ajax(\"/validate\", {\r\n            data: JSON.stringify({\r\n                formName: formName,\r\n                payload: jsonModel\r\n            }),\r\n            contentType: \"application/json; charset=utf-8\",\r\n            dataType: \"json\",\r\n            method: \"POST\",\r\n            success: (e) => console.log(\"server: \", e)\r\n        });\r\n        logic.enforceValidation(() => console.log(\"client: \", logic.nodes.filter(n => !!n.lastError).map(n => n.lastError)))\r\n    })\r\n})();\r\n"],"sourceRoot":""}